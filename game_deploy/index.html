<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CS 1.6 Web - Multiplayer</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="damage-flash"></div>
    <div id="headshot-msg">HEADSHOT!</div>

    <div id="ui-layer">
        <div id="crosshair">
            <div class="ch-h"></div>
            <div class="ch-v"></div>
        </div>
        <div id="hud">
            <div>✚ <span id="hp">100</span></div>
            <div id="weapon-info"><span id="wep-name">GLOCK</span> | <span id="ammo">20</span> / <span
                    id="mag">120</span></div>
        </div>
        <div id="money">$ 800</div>
        <div id="killfeed"></div>

        <!-- CHAT -->
        <div id="chat-container">
            <div id="chat-history"></div>
            <input type="text" id="chat-input" placeholder="Press Enter to send..." maxlength="100">
        </div>

        <!-- SCOREBOARD -->
        <div id="scoreboard" style="display:none;">
            <h3>SCOREBOARD</h3>
            <table id="scoreboard-list" style="width:100%; border-collapse:collapse;">
                <!-- Rows injected by JS -->
            </table>
        </div>
        <div id="hints-panel"></div>
        <div id="bomb-indicator"></div>
    </div>

    <!-- LOGIN MODAL -->
    <div id="login-modal">
        <h1>CS 1.6 WEB: GAME MODES WITH VOICE CHAT</h1>
        <input type="text" id="player-name" placeholder="Enter Name (Multiplayer)" maxlength="15">

        <div class="menu-grid">
            <div class="menu-btn" id="singleplayer-btn">Classic Practice (vs Bots)</div>
            <div class="menu-btn" id="ai-ct-btn">AI CT/T Bomb Mode</div>
            <div class="menu-btn" id="multiplayer-btn">Multiplayer FFA</div>
            <div class="menu-btn" id="ctt-btn">Multiplayer CT/T Bomb</div>
        </div>

        <p style="font-size: 12px; color: #888; margin-top:15px;">
            Voice Key: <strong>T</strong> | Plant: <strong>G</strong> | Defuse: <strong>H</strong> | Shop: <strong>B</strong> | Settings: <strong>ESC</strong>
        </p>
    </div>

    <!-- SHOP -->
    <div id="shop-menu" class="menu-box">
        <h2 style="margin-top:0; border-bottom: 1px solid #ffb93b; padding-bottom:10px;">BUY MENU</h2>
        <div class="shop-item" onclick="buy('glock')"><span>Glock-18 (Secondary)</span> <span>$400</span></div>
        <div class="shop-item" onclick="buy('usp')"><span>USP Tactical (Secondary)</span> <span>$500</span></div>
        <div class="shop-item" onclick="buy('deagle')"><span>Desert Eagle (Secondary)</span> <span>$700</span></div>
        <div class="shop-item" onclick="buy('m4a1')"><span>M4A1 (Primary)</span> <span>$3100</span></div>
        <div class="shop-item" onclick="buy('ak47')"><span>AK47 (Primary)</span> <span>$2700</span></div>
        <div class="shop-item" onclick="buy('mp5')"><span>MP5 (Primary)</span> <span>$2250</span></div>
        <div class="shop-item" onclick="buy('awp')"><span>AWP (Primary)</span> <span>$4750</span></div>
        <div class="shop-item" onclick="buy('gatling')"><span>加特林 (Heavy)</span> <span>$5200</span></div>
        <div class="shop-item" onclick="buy('katana')"><span>Katana (Melee)</span> <span>$2000</span></div>
        <div class="shop-item" onclick="buy('snowball')"><span>Snow Ball (Utility)</span> <span>$300</span></div>
        <p style="font-size:12px; color:#aaa;">Press B to Close</p>
    </div>

    <!-- DEATH SCREEN -->
    <div id="death-screen" class="menu-box" style="z-index: 30;">
        <div class="dead-msg">YOU DIED</div>
        <div class="menu-btn" onclick="respawnPlayer()">RESPAWN</div>
    </div>

    <!-- START SCREEN -->
    <div id="start-screen" style="display:none;">
        <h1>CS 1.6 WEB: MODE BRIEFING</h1>
        <p>WASD: Move | CTRL: Crouch | Space: Jump | Shift: Walk</p>
        <p>1: Primary | 2: Secondary | 3: Knife | 4: Utility | B: Buy | G/H: Plant/Defuse | T: Voice</p>
        <div class="menu-btn" id="start-btn">CLICK TO START</div>
    </div>

    <div id="settings-menu" class="menu-box" style="display:none; z-index:50;">
        <h2>SETTINGS</h2>
        <div class="menu-btn" id="settings-resume">RESUME</div>
        <div class="menu-btn" id="settings-quit">QUIT TO MENU</div>
        <div class="menu-btn" id="settings-switch">SWITCH MODE</div>
    </div>

    <div id="team-select-modal" class="menu-box" style="display:none; z-index:60;">
        <h2>SELECT YOUR TEAM</h2>
        <div class="menu-btn" id="team-ct">COUNTER-TERRORIST</div>
        <div class="menu-btn" id="team-t">TERRORIST</div>
        <p style="font-size:12px; color:#aaa;">Balanced teams will auto-assign if full.</p>
    </div>

    <script>
        (function clearCaches() {
            if ('caches' in window) {
                caches.keys().then(keys => Promise.all(keys.map(key => caches.delete(key))));
            }
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(regs => regs.forEach(reg => reg.unregister()));
            }
        })();
    </script>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
</script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script type="module">
        const version = Date.now();
        import(`./js/main.js?v=${version}`);
    </script>
</body>

</html>